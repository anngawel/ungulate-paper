function hideSections(){var n=jQuery("#CountrySelection"),t=jQuery("#ScientificAreasSelection"),i=jQuery("#TopicsSelection");n.hide();t.hide();i.hide()}function showSection(n){var t=jQuery(n);t.show()}function deselectAll(n){$(n+" div.newsletterOptions div.bottomGap").children("input[type='checkbox']:checked").removeAttr("checked")}function defaultCountry(){$("#CountrySelection div.newsletterOptions div.styledSelect").children("select").val("Select a country")}function newsletterSelectionChanged(){var r=jQuery(".newsletterOptions .blockOption").children("input[type='checkbox']:checked"),n=$(".newsletterOptions .blockOption").children("input[type='checkbox']input[country='True']:checked").length>0,t=$(".newsletterOptions .blockOption").children("input[type='checkbox']input[scientificAreas='True']:checked").length>0,i=$(".newsletterOptions .blockOption").children("input[type='checkbox']input[topics='True']:checked").length>0;hideSections();n?showSection("#CountrySelection"):defaultCountry();t?showSection("#ScientificAreasSelection"):deselectAll("#ScientificAreasSelection");i?showSection("#TopicsSelection"):deselectAll("#TopicsSelection")}var rsApp=angular.module("rsApp",["fellowSearch.module","eventSearch.module","awardSearch.module","grantSearch.module","researchProjectSearch.module","reportsPublicationsSearch.module","siteSearch.module"]).run(["$rootScope",function(n){n.$on("serviceLayerErrorEvent",function(){console.log(arguments[0].name,Array.prototype.slice.call(arguments,1))})}]),rwFellowSearch=angular.module("fellowSearch.module",["fellowType.controller","fellowNameSearch.controller","scientificAreaSearch.controller","institutionSearch.controller","fellowSearch.controller","researchFellowSearch.controller","endpoints.service","unique.filter","rwToggleFlip.directive","rwEnter.directive"]),rwEventSearch,rwAwardSearch,rwGrantSearch,rwResearchProjectSearch,rwReportsPublicationsSearch,rwSiteSearch;(function(){"use strict";angular.module("fellowType.controller",[]).controller("fellowTypeController",["$scope",function(n){n.fellow={};n.setSearchType=function(t){n.fellow.searchType=t}}])})(),function(){"use strict";angular.module("fellowNameSearch.controller",[]).controller("fellowNameSearchController",["$scope","$filter","endpoints",function(n,t,i){n.fellowNameButtonText="Find Fellows";n.researchFellowNameButtonText="Find Research Fellows";n.getFirstNameSuggestions=function(){n.uniqueUrl="";n.fellowNameButtonText="Find Fellows";n.fellow.firstName.length>=3?n.fellow.searchType==="fellows"?i.fellowFirstNameData.get(n.fellow.firstName).then(function(t){n.firstNameSuggestions=t;n.showFirstNameSuggestions=!0}):i.researchFellowFirstNameData.get(n.fellow.firstName).then(function(t){n.firstNameSuggestions=t;n.showFirstNameSuggestions=!0}):n.showFirstNameSuggestions=!1};n.chooseFirstName=function(t){n.fellow.firstName=t;n.showFirstNameSuggestions=!1;n.firstNameSelected=!0;n.filteredFirstNames.length===1?(n.fellow.lastName=n.filteredFirstNames[0].LastName,n.fellowNameButtonText="View Profile",n.uniqueUrl=n.filteredFirstNames[0].Url):n.fellowNameButtonText="Find Fellows"};n.getLastNameSuggestions=function(){n.uniqueUrl="";n.fellowNameButtonText="Find Fellows";n.firstNameSelected?n.fellow.searchType==="fellows"?i.fellowLastNameData.get(n.fellow.lastName,n.fellow.firstName).then(function(t){n.lastNameSuggestions=t;n.showLastNameSuggestions=!0}):i.researchFellowLastNameData.get(n.fellow.lastName,n.fellow.firstName).then(function(t){n.lastNameSuggestions=t;n.showLastNameSuggestions=!0}):n.fellow.lastName&&n.fellow.lastName.length>=3?n.fellow.searchType==="fellows"?i.fellowLastNameData.get(n.fellow.lastName).then(function(t){n.lastNameSuggestions=t;n.showLastNameSuggestions=!0}):i.researchFellowLastNameData.get(n.fellow.lastName).then(function(t){n.lastNameSuggestions=t;n.showLastNameSuggestions=!0}):n.showLastNameSuggestions=!1};n.chooseLastName=function(i){n.fellow.lastName=i;n.showLastNameSuggestions=!1;n.filteredLastNames=t("filter")(n.filteredLastNames,n.fellow.lastName);n.filteredLastNames.length===1?(n.fellow.firstName=n.filteredLastNames[0].FirstName,n.fellowNameButtonText="View Profile",n.uniqueUrl=n.filteredLastNames[0].Url):n.fellowNameButtonText="Find Fellows"};n.goToFellowSearch=function(t){t.preventDefault();var i="";n.uniqueUrl?i=n.uniqueUrl:(i=t.target.href,n.fellow.firstName?i=n.fellow.lastName?i+"/#?firstname="+n.fellow.firstName+"&lastname="+n.fellow.lastName:i+"/#?firstname="+n.fellow.firstName:n.fellow.lastName&&(i=i+"/#?lastname="+n.fellow.lastName),console.log(i),console.log(window.location));window.location=encodeURI(i)};n.clickFellowSearch=function(){var t=setTimeout(function(){n.fellow.searchType==="fellows"?$("#nameFellowsSearchLink").click():$("#nameResearchFellowsSearchLink").click()},100)}}])}(),function(){"use strict";angular.module("scientificAreaSearch.controller",[]).controller("scientificAreaSearchController",["$scope","endpoints",function(n,t){n.fellowNameButtonText="Find Fellows";n.researchFellowNameButtonText="Find Research Fellows";n.setDefaults=function(){n.fellowResearchAreaText="Subject group not selected";n.gotSubjects=!1};n.populateSubjectGroups=function(){n.setDefaults();t.scientificAreasData.get().then(function(t){var i,r;if(n.subjectGroups=t,n.fellow.scientificAreaName)for(i=0;i<n.subjectGroups.length;i++)if(n.subjectGroups[i].Name.toLowerCase()===n.fellow.scientificAreaName){n.fellow.scientificAreaId=n.subjectGroups[i].Id;n.fellow.scientificAreaName="";break}if(n.fellow.researchAreaName)for(i=0;i<n.subjectGroups.length;i++)for(r=0;r<n.subjectGroups[i].ResearchAreas.length;r++)if(n.subjectGroups[i].ResearchAreas[r].Name.toLowerCase()===n.fellow.researchAreaName){n.fellow.researchAreaId=n.subjectGroups[i].ResearchAreas[r].Id;n.fellow.researchAreaName="";break}n.populateResearchAreas()})};n.populateResearchAreas=function(){if(n.fellow.scientificAreaId){for(var t=0;t<n.subjectGroups.length;t++)if(n.subjectGroups[t].Id===n.fellow.scientificAreaId){n.groupResearchAreas=n.subjectGroups[t].ResearchAreas;break}n.fellowResearchAreaText="Select subject group";n.gotSubjects=!0}else n.setDefaults()};n.goToFellowSearch=function(t){t.preventDefault();var i=t.target.href;n.fellow.scientificAreaId?i=n.fellow.researchAreaId?i+"/#?scientificareaid="+n.fellow.scientificAreaId+"&researchareaid="+n.fellow.researchAreaId:i+"/#?scientificareaid="+n.fellow.scientificAreaId:n.fellow.researchAreaId&&(i=i+"/#?researchareaid="+n.fellow.researchAreaId);window.location=encodeURI(i)}}])}(),function(){"use strict";angular.module("institutionSearch.controller",[]).controller("institutionSearchController",["$scope","endpoints",function(n,t){n.fellowNameButtonText="Find Fellows";n.researchFellowNameButtonText="Find Research Fellows";n.getInstitutionSuggestions=function(){n.fellow.institutionId="";n.fellow.institutionName.length>=3?n.fellow.searchType==="fellows"?t.institutionsData.get(n.fellow.institutionName).then(function(t){n.institutionSuggestions=t;n.showInstitutionSuggestions=!0}):t.researchFellowInstitutionsData.get(n.fellow.institutionName).then(function(t){n.institutionSuggestions=t;n.showInstitutionSuggestions=!0}):n.fellow.institutionName.length<1?angular.isDefined(n.getFellowResults)&&n.getFellowResults():n.showInstitutionSuggestions=!1};n.chooseInstitution=function(t){n.fellow.institutionId=t.Id;n.fellow.institutionName=t.Name;n.showInstitutionSuggestions=!1};n.goToFellowSearch=function(t){t.preventDefault();var i=t.target.href;n.fellow.searchType==="fellows"?n.fellow.institutionId&&(i=i+"/#?institutionid="+n.fellow.institutionId,n.fellow.institutionName&&n.fellow.institutionName.length>0&&(i=i+"&institution="+n.fellow.institutionName)):n.fellow.institutionName&&(i=i+"/#?institution="+n.fellow.institutionName);window.location=encodeURI(i)};n.clickFellowSearch=function(){var t=setTimeout(function(){n.fellow.searchType==="fellows"?$("#institutionFellowsSearchLink").click():$("#institutionResearchFellowsSearchLink").click()},100)}}])}(),function(){"use strict";angular.module("fellowSearch.controller",[]).controller("fellowSearchController",["$scope","$location","$sce","endpoints","$window",function(n,t,i,r){n.fellow={};n.fellow.searchType="fellows";n.showDeceased=!1;n.sort="date";n.startIndex=0;n.numOfResults=12;n.resultsShown=n.numOfResults;n.queryString=t.search();n.checkQueryString=function(){if(n.queryString)for(var t in n.queryString)if(n.queryString.hasOwnProperty(t))return!0;return!1};n.checkQueryStringFiltersSet=function(){if(n.checkQueryString())for(var t in n.queryString)if(t!=="firstname"&&t!=="lastname"&&t!=="sort"&&t!=="show")return!0;return!1};n.clearFilters=function(t){n.fellow.firstName="";n.fellow.lastName="";n.fellow.scientificAreaName="";n.fellow.scientificAreaId="";n.fellow.researchAreaName="";n.fellow.researchAreaId="";n.fellow.institutionName="";n.fellow.institutionId="";n.electedFrom="";n.electedTo="";n.awardName="";n.awardId="";n.genderName="";n.genderId="";n.freeText="";n.country="";n.countryId="";n.specialismName="";n.specialismId="";n.memberTypeName="";n.memberTypeId="";n.interestName="";n.interestId="";n.showDeceased=!1;n.sort="date";n.numOfResults=12;t&&n.getFellowResults()};n.checkQueryStringFiltersSet()&&(n.showFilters=!0);n.queryString.firstname&&(n.fellow.firstName=n.queryString.firstname.toLowerCase());n.queryString.lastname&&(n.fellow.lastName=n.queryString.lastname.toLowerCase());n.queryString.scientificarea&&(n.fellow.scientificAreaName=n.queryString.scientificarea.toLowerCase());n.queryString.scientificareaid&&(n.fellow.scientificAreaId=n.queryString.scientificareaid.toLowerCase());n.queryString.researcharea&&(n.fellow.researchAreaName=n.queryString.researcharea.toLowerCase());n.queryString.researchareaid&&(n.fellow.researchAreaId=n.queryString.researchareaid.toLowerCase());n.queryString.institution&&(n.fellow.institutionName=n.queryString.institution.toLowerCase());n.queryString.institutionid&&(n.fellow.institutionId=n.queryString.institutionid.toLowerCase());n.queryString.earliestelectedyear&&(n.electedFrom=parseInt(n.queryString.earliestelectedyear));n.queryString.latestelectedyear&&(n.electedTo=parseInt(n.queryString.latestelectedyear));n.queryString.award&&(n.awardName=n.queryString.award);n.queryString.gender&&(n.genderName=n.queryString.gender.toLowerCase());n.queryString.genderid&&(n.genderId=n.queryString.genderid.toLowerCase());n.queryString.searchterm&&(n.freeText=n.queryString.searchterm.toLowerCase());n.queryString.country&&(n.country=n.queryString.country.toLowerCase());n.queryString.countryid&&(n.countryId=parseInt(n.queryString.countryid));n.queryString.specialism&&(n.specialismName=n.queryString.specialism.toLowerCase());n.queryString.specialismid&&(n.specialismId=n.queryString.specialismid.toLowerCase());n.queryString.fellowshiptype&&(n.memberTypeName=n.queryString.fellowshiptype.toLowerCase());n.queryString.fellowshiptypeid&&(n.memberTypeId=n.queryString.fellowshiptypeid.toLowerCase());n.queryString.interest&&(n.interestName=n.queryString.interest.toLowerCase());n.queryString.interestid&&(n.interestId=parseInt(n.queryString.interestid));n.queryString.showonlydeceased&&(n.showDeceased=!0);n.queryString.sort&&(n.sort=n.queryString.sort.toLowerCase());n.queryString.show&&(n.numOfResults=parseInt(n.queryString.show));n.populateFilters=function(){var i,t;for(r.loggedInState.get().then(function(t){t.IsAuthenticated&&t.IsFellow&&(n.isFellow=!0)}),n.yearFilterOptions=[],i=new Date,t=i.getFullYear();t>=1947;t--)n.yearFilterOptions.push(t);r.medalAwardsData.get().then(function(t){if(n.awardFilterOptions=t,n.awardName)for(var i=0;i<n.awardFilterOptions.length;i++)if(n.awardFilterOptions[i].Name.toLowerCase()===n.awardName){n.awardId=n.awardFilterOptions[i].Id;break}});r.gendersData.get().then(function(t){if(n.genderFilterOptions=t,n.genderName)for(var i=0;i<n.genderFilterOptions.length;i++)if(n.genderFilterOptions[i].Name.toLowerCase()===n.genderName){n.genderId=n.genderFilterOptions[i].Id;n.genderName="";break}});r.countriesData.get().then(function(t){if(n.countriesOptions=t,n.country)for(var i=0;i<n.countriesOptions.length;i++)if(n.countriesOptions[i].Name.toLowerCase()===n.country){n.countryId=n.countriesOptions[i].Id;n.country="";break}});r.memberTypesData.get().then(function(t){if(n.memberTypesFilterOptions=t,n.memberTypeName)for(var i=0;i<n.memberTypesFilterOptions.length;i++)if(n.memberTypesFilterOptions[i].Name.toLowerCase()===n.memberTypeName){n.memberTypeId=n.memberTypesFilterOptions[i].Id;n.memberTypeName="";break}});r.interestsData.get().then(function(t){if(n.interestsFilterOptions=t,n.interestName)for(var i=0;i<n.interestsFilterOptions.length;i++)if(n.interestsFilterOptions[i].Name.toLowerCase()===n.interestName){n.interestId=n.interestsFilterOptions[i].Id;n.interestName="";break}});r.schemesData.get().then(function(t){n.schemesFilterOptions=t})};n.getSpecialismSuggestions=function(){n.specialismId="";n.specialismName.length>=3?r.specialismsData.get(n.specialismName).then(function(t){n.specialismSuggestions=t;n.showSpecialismSuggestions=!0}):n.specialismName.length<1?n.getFellowResults():n.showSpecialismSuggestions=!1};n.chooseSpecialism=function(t){n.specialismId=t.Id;n.specialismName=t.Name;n.showSpecialismSuggestions=!1;n.getFellowResults()};n.getFellowResults=function(t){var i={};n.fellow.searchType&&(i.SearchType=n.fellow.searchType);n.showDeceased&&(i.ShowOnlyDeceased=n.showDeceased);n.fellow.firstName&&(i.FirstName=n.fellow.firstName);n.fellow.lastName&&(i.LastName=n.fellow.lastName);n.fellow.scientificAreaName&&(i.ScientificAreaNames=[n.fellow.scientificAreaName]);n.fellow.scientificAreaId&&(i.ScientificAreaIds=[n.fellow.scientificAreaId]);n.fellow.researchAreaName&&(i.ResearchAreaNames=[n.fellow.researchAreaName]);n.fellow.researchAreaId&&(i.ResearchAreaIds=[n.fellow.researchAreaId]);n.fellow.institutionName&&(i.InstitutionName=n.fellow.institutionName);n.fellow.institutionId&&(i.InstitutionId=n.fellow.institutionId);n.electedFrom&&(i.LowestElectedYear=n.electedFrom);n.electedTo&&(i.HighestElectedYear=n.electedTo);n.awardName&&(i.AwardName=n.awardName);n.genderName&&(i.GenderName=n.genderName);n.genderId&&(i.GenderId=n.genderId);n.freeText&&(i.FreeText=n.freeText);n.country&&(i.CountryNames=[n.country]);n.countryId&&(i.CountryIds=[n.countryId]);n.specialismName&&(i.SpecialismNames=[n.specialismName]);n.specialismId&&(i.SpecialismIds=[n.specialismId]);n.memberTypeName&&(i.MembershipTypeName=n.memberTypeName);n.memberTypeId&&(i.MembershipTypeId=n.memberTypeId);n.interestName&&(i.InterestName=n.interestName);n.interestId&&(i.InterestId=n.interestId);n.sort&&(i.Sort=n.sort);!t&&n.resultsShown>n.numOfResults?(i.StartIndex=0,i.PageSize=n.resultsShown):(i.StartIndex=n.startIndex,i.PageSize=n.numOfResults);r.fellowSearchResultsData.post(i).then(function(i){if(t)for(var r=0;r<i.Results.length;r++)n.fellowSearchResults.push(i.Results[r]);else n.fellowSearchResults=i.Results;n.resultsFound=i.Summary.ResultsFound})};n.renderHtml=function(n){return i.trustAsHtml(n)};n.viewMore=function(){n.startIndex=n.resultsShown;n.resultsShown+=n.numOfResults;n.getFellowResults(!0)};n.setNumOfResults=function(t){n.numOfResults=t;n.resultsShown=n.numOfResults;n.startIndex=0;n.getFellowResults()}}])}(),function(){"use strict";angular.module("researchFellowSearch.controller",[]).controller("researchFellowSearchController",["$scope","$location","$sce","endpoints","$window",function(n,t,i,r){n.fellow={};n.fellow.searchType="researchfellows";n.showPastResearchFellows=!1;n.sort="date";n.startIndex=0;n.numOfResults=12;n.resultsShown=n.numOfResults;n.queryString=t.search();n.checkQueryString=function(){if(n.queryString)for(var t in n.queryString)if(n.queryString.hasOwnProperty(t))return!0;return!1};n.checkQueryStringFiltersSet=function(){if(n.checkQueryString())for(var t in n.queryString)if(t!=="firstname"&&t!=="lastname"&&t!=="sort"&&t!=="show")return!0;return!1};n.clearFilters=function(t){n.fellow.firstName="";n.fellow.lastName="";n.fellow.scientificAreaName="";n.fellow.scientificAreaId="";n.fellow.researchAreaName="";n.fellow.researchAreaId="";n.fellow.institutionName="";n.fellow.institutionId="";n.awardName="";n.awardId="";n.freeText="";n.schemeName="";n.showPastResearchFellows=!1;n.sort="az";n.numOfResults=12;t&&n.getFellowResults()};n.checkQueryStringFiltersSet()&&(n.showFilters=!0);n.queryString.firstname&&(n.fellow.firstName=n.queryString.firstname.toLowerCase());n.queryString.lastname&&(n.fellow.lastName=n.queryString.lastname.toLowerCase());n.queryString.scientificarea&&(n.fellow.scientificAreaName=n.queryString.scientificarea.toLowerCase());n.queryString.scientificareaid&&(n.fellow.scientificAreaId=n.queryString.scientificareaid.toLowerCase());n.queryString.researcharea&&(n.fellow.researchAreaName=n.queryString.researcharea.toLowerCase());n.queryString.researchareaid&&(n.fellow.researchAreaId=n.queryString.researchareaid.toLowerCase());n.queryString.institution&&(n.fellow.institutionName=n.queryString.institution.toLowerCase());n.queryString.institutionid&&(n.fellow.institutionId=n.queryString.institutionid.toLowerCase());n.queryString.award&&(n.awardName=n.queryString.award.toLowerCase());n.queryString.awardid&&(n.awardId=n.queryString.awardid.toLowerCase());n.queryString.searchterm&&(n.freeText=n.queryString.searchterm.toLowerCase());n.queryString.schemename&&(n.schemeName=n.queryString.schemename);n.queryString.showpastresearchfellows&&(n.showPastResearchFellows=!0);n.queryString.sort&&(n.sort=n.queryString.sort.toLowerCase());n.queryString.show&&(n.numOfResults=parseInt(n.queryString.show));n.populateFilters=function(){var i,t;for(r.loggedInState.get().then(function(t){t.IsAuthenticated&&t.IsFellow&&(n.isFellow=!0)}),n.yearFilterOptions=[],i=new Date,t=i.getFullYear();t>=1947;t--)n.yearFilterOptions.push(t);r.schemesData.get().then(function(t){n.schemesFilterOptions=t})};n.getSpecialismSuggestions=function(){n.specialismId="";n.specialismName.length>=3?r.specialismsData.get(n.specialismName).then(function(t){n.specialismSuggestions=t;n.showSpecialismSuggestions=!0}):n.specialismName.length<1?n.getFellowResults():n.showSpecialismSuggestions=!1};n.chooseSpecialism=function(t){n.specialismId=t.Id;n.specialismName=t.Name;n.showSpecialismSuggestions=!1;n.getFellowResults()};n.getFellowResults=function(t){var i={};n.fellow.searchType&&(i.SearchType=n.fellow.searchType);n.showPastResearchFellows&&(i.showPastResearchFellows=n.showPastResearchFellows);n.fellow.firstName&&(i.FirstName=n.fellow.firstName);n.fellow.lastName&&(i.LastName=n.fellow.lastName);n.fellow.scientificAreaName&&(i.ScientificAreaNames=[n.fellow.scientificAreaName]);n.fellow.scientificAreaId&&(i.ScientificAreaIds=[n.fellow.scientificAreaId]);n.fellow.researchAreaName&&(i.ResearchAreaNames=[n.fellow.researchAreaName]);n.fellow.researchAreaId&&(i.ResearchAreaIds=[n.fellow.researchAreaId]);n.fellow.institutionName&&(i.InstitutionName=n.fellow.institutionName);n.fellow.institutionId&&(i.InstitutionId=n.fellow.institutionId);n.awardName&&(i.AwardName=n.awardName);n.awardId&&(i.AwardId=n.awardId);n.freeText&&(i.FreeText=n.freeText);n.schemeName&&(i.AwardName=n.schemeName);n.sort&&(i.Sort=n.sort);!t&&n.resultsShown>n.numOfResults?(i.StartIndex=0,i.PageSize=n.resultsShown):(i.StartIndex=n.startIndex,i.PageSize=n.numOfResults);r.fellowSearchResultsData.post(i).then(function(i){if(t)for(var r=0;r<i.Results.length;r++)n.fellowSearchResults.push(i.Results[r]);else n.fellowSearchResults=i.Results;n.resultsFound=i.Summary.ResultsFound})};n.renderHtml=function(n){return i.trustAsHtml(n)};n.viewMore=function(){n.startIndex=n.resultsShown;n.resultsShown+=n.numOfResults;n.getFellowResults(!0)};n.setNumOfResults=function(t){n.numOfResults=t;n.resultsShown=n.numOfResults;n.startIndex=0;n.getFellowResults()}}])}();rwEventSearch=angular.module("eventSearch.module",["eventSearch.controller","endpoints.service","helper.service","rwToggleFlip.directive","rwDatepicker.directive","rwEnter.directive","rwSetCardHeight.directive"]),function(){"use strict";angular.module("eventSearch.controller",[]).controller("eventSearchController",["$scope","$location","$sce","endpoints","helper","$window",function(n,t,i,r,u){n.searchType="upcoming";n.audience="all";n.audioVideoOnly=!1;n.sort="date";n.startIndex=0;n.numOfResults=8;n.resultsShown=n.numOfResults;n.showFilters=!1;n.queryString=t.search();n.checkQueryString=function(){if(n.queryString)for(var t in n.queryString)if(n.queryString.hasOwnProperty(t))return!0;return!1};n.checkQueryStringFiltersSet=function(){if(n.checkQueryString())for(var t in n.queryString)if(t!=="show"&&t!=="sort"&&t!=="audience"&&t!=="searchtype"&&t!=="searchterm")return!0;return!1};n.clearFilters=function(t){n.searchTerm="";n.fromDate="";n.toDate="";n.scientificAreaName="";n.scientificAreaId="";n.topicName="";n.topicId="";n.seriesName="";n.seriesId="";n.locationName="";n.locationId="";n.numOfResults=8;n.audioVideoOnly=!1;n.sort="date";t&&n.getEventResults()};n.checkQueryStringFiltersSet()&&(n.showFilters=!0);n.queryString.audioVideoOnly=="true"&&(n.audioVideoOnly=!0);n.queryString.searchtype&&(n.searchType=n.queryString.searchtype.toLowerCase());n.queryString.audience&&(n.audience=n.queryString.audience.toLowerCase());n.queryString.searchterm&&(n.searchTerm=n.queryString.searchterm.toLowerCase());n.queryString.datefrom&&(n.fromDate=n.queryString.datefrom,n.fromDate=n.fromDate.substring(6,8)+"/"+n.fromDate.substring(4,6)+"/"+n.fromDate.substring(0,4));n.queryString.dateto&&(n.toDate=n.queryString.dateto,n.toDate=n.toDate.substring(6,8)+"/"+n.toDate.substring(4,6)+"/"+n.toDate.substring(0,4));n.queryString.scientificarea&&(n.scientificAreaName=n.queryString.scientificarea.toLowerCase());n.queryString.scientificareaid&&(n.scientificAreaId=n.queryString.scientificareaid.toLowerCase());n.queryString.topic&&(n.topicName=n.queryString.topic.toLowerCase());n.queryString.topicid&&(n.topicId=n.queryString.topicid.toLowerCase());n.queryString.series&&(n.seriesName=n.queryString.series.toLowerCase());n.queryString.seriesid&&(n.seriesId=n.queryString.seriesid.toLowerCase());n.queryString.location&&(n.locationName=n.queryString.location.toLowerCase());n.queryString.locationid&&(n.locationId=n.queryString.locationid.toLowerCase());n.queryString.sort&&(n.sort=n.queryString.sort.toLowerCase());n.queryString.show&&(n.numOfResults=parseInt(n.queryString.show));n.setSearchType=function(t){n.searchType=t;n.getEventResults()};n.setAudience=function(t){n.audience=t;n.getEventResults()};n.setMonth=function(t){var f;n.monthModifier=t;var u=new Date,i=u.getMonth()+n.monthModifier,r=u.getFullYear();i<=0&&(i="12",r--);f=new Date(r,i,0);n.fromDate="01/"+("0"+i).slice(-2)+"/"+r;n.toDate=f.getDate()+"/"+("0"+i).slice(-2)+"/"+r;n.getEventResults()};n.populateFilters=function(){r.audioVideoOnly.get().then(function(){});r.scientificAreasData.get().then(function(t){if(n.scientificAreaFilterOptions=t,n.scientificAreaName)for(var i=0;i<n.scientificAreaFilterOptions.length;i++)if(n.scientificAreaFilterOptions[i].Name.toLowerCase()===n.scientificAreaName){n.scientificAreaId=n.scientificAreaFilterOptions[i].Id;n.scientificAreaName="";break}});r.topicsData.get().then(function(t){if(n.topicFilterOptions=t,n.topicName)for(var i=0;i<n.topicFilterOptions.length;i++)if(n.topicFilterOptions[i].Name.toLowerCase()===n.topicName){n.topicId=n.topicFilterOptions[i].Id;n.topicName="";break}});r.seriesData.get().then(function(t){if(n.seriesFilterOptions=t,n.seriesName)for(var i=0;i<n.seriesFilterOptions.length;i++)if(n.seriesFilterOptions[i].Name.toLowerCase()===n.seriesName){n.seriesId=n.seriesFilterOptions[i].Id;n.seriesName="";break}})};n.getEventResults=function(t){var i={};n.audience&&(i.AudienceName=n.audience);n.audioVideoOnly&&(i.IncludeAudioVisualOnly=n.audioVideoOnly);n.sort&&(i.sort=n.sort);n.searchType&&(i.SearchType=n.searchType);n.searchTerm&&(i.Keywords=n.searchTerm);n.fromDate&&(i.StartDateTime=u.convertToSystemDate(n.fromDate));n.toDate&&(i.EndDateTime=u.convertToSystemDate(n.toDate,!0));n.scientificAreaName&&(i.ScientificAreaName=n.scientificAreaName);n.scientificAreaId&&(i.ScientificAreaId=n.scientificAreaId);n.topicName&&(i.TopicName=n.topicName);n.topicId&&(i.TopicId=n.topicId);n.seriesName&&(i.SeriesName=n.seriesName);n.seriesId&&(i.SeriesId=n.seriesId);n.locationName&&(i.Location=n.locationName);n.locationId&&(i.LocationId=n.locationId);n.locationId&&(i.LocationId=n.locationId);!t&&n.resultsShown>n.numOfResults?(i.StartIndex=0,i.PageSize=n.resultsShown):(i.StartIndex=n.startIndex,i.PageSize=n.numOfResults);r.eventSearchResultsData.post(i).then(function(i){if(t)for(var r=0;r<i.Results.length;r++)n.eventSearchResults.push(i.Results[r]);else n.eventSearchResults=i.Results;n.resultsFound=i.Summary.ResultsFound})};n.renderHtml=function(n){return i.trustAsHtml(n)};n.viewMore=function(){n.startIndex=n.resultsShown;n.resultsShown+=n.numOfResults;n.getEventResults(!0)};n.setNumOfResults=function(t){n.numOfResults=t;n.resultsShown=n.numOfResults;n.startIndex=0;n.getEventResults()}}])}();rwAwardSearch=angular.module("awardSearch.module",["awardSearch.controller","endpoints.service","helper.service","rwToggleFlip.directive","rwEnter.directive"]),function(){"use strict";angular.module("awardSearch.controller",[]).controller("awardSearchController",["$scope","$location","$sce","endpoints","helper","$window",function(n,t,i,r){n.sort="az";n.startIndex=0;n.numOfResults=8;n.resultsShown=n.numOfResults;n.queryString=t.search();n.clearFilters=function(t){n.searchTerm="";n.awardType="";n.awardTypeId="";n.scientificAreaName="";n.scientificAreaId="";n.topicName="";n.topicId="";n.sort="az";n.numOfResults=8;t&&n.getAwardResults()};n.queryString.searchTerm&&(n.searchTerm=n.queryString.searchTerm.toLowerCase());n.queryString.type&&(n.awardType=n.queryString.type.toLowerCase());n.queryString.typeid&&(n.awardTypeId=n.queryString.typeid.toLowerCase());n.queryString.scientificarea&&(n.scientificAreaName=n.queryString.scientificarea.toLowerCase());n.queryString.scientificareaid&&(n.scientificAreaId=n.queryString.scientificareaid.toLowerCase());n.queryString.topic&&(n.topicName=n.queryString.topic.toLowerCase());n.queryString.topicid&&(n.topicId=n.queryString.topicid.toLowerCase());n.queryString.sort&&(n.sort=n.queryString.sort.toLowerCase());n.queryString.show&&(n.numOfResults=parseInt(n.queryString.show));n.populateFilters=function(){r.medalTypesData.get().then(function(t){if(n.medalTypesFilterOptions=t,n.awardType)for(var i=0;i<n.medalTypesFilterOptions.length;i++)if(n.medalTypesFilterOptions[i].Name.toLowerCase()===n.awardType){n.awardTypeId=n.medalTypesFilterOptions[i].Id;n.awardType="";break}});r.scientificAreasData.get().then(function(t){if(n.scientificAreaFilterOptions=t,n.scientificAreaName)for(var i=0;i<n.scientificAreaFilterOptions.length;i++)if(n.scientificAreaFilterOptions[i].Name.toLowerCase()===n.scientificAreaName){n.scientificAreaId=n.scientificAreaFilterOptions[i].Id;n.scientificAreaName="";break}});r.topicsData.get().then(function(t){if(n.topicFilterOptions=t,n.topicName)for(var i=0;i<n.topicFilterOptions.length;i++)if(n.topicFilterOptions[i].Name.toLowerCase()===n.topicName){n.topicId=n.topicFilterOptions[i].Id;n.topicName="";break}})};n.getAwardResults=function(t){var i={};n.sort&&(i.Sort=n.sort);n.searchTerm&&(i.Keywords=n.searchTerm);n.awardType&&(i.Type=n.awardType);n.awardTypeId&&(i.TypeId=n.awardTypeId);n.scientificAreaName&&(i.ScientificAreaNames=[n.scientificAreaName]);n.scientificAreaId&&(i.ScientificAreaIds=[n.scientificAreaId]);n.topicName&&(i.TopicName=n.topicName);n.topicId&&(i.TopicId=n.topicId);!t&&n.resultsShown>n.numOfResults?(i.StartIndex=0,i.PageSize=n.resultsShown):(i.StartIndex=n.startIndex,i.PageSize=n.numOfResults);r.awardSearchResultsData.post(i).then(function(i){if(t)for(var r=0;r<i.Results.length;r++)n.awardSearchResults.push(i.Results[r]);else n.awardSearchResults=i.Results;n.resultsFound=i.Summary.ResultsFound;n.grantResultsFound=i.Summary.OtherResultsFound})};n.renderHtml=function(n){return i.trustAsHtml(n)};n.viewMore=function(){n.startIndex=n.resultsShown;n.resultsShown+=n.numOfResults;n.getAwardResults(!0)};n.setNumOfResults=function(t){n.numOfResults=t;n.resultsShown=n.numOfResults;n.startIndex=0;n.getAwardResults()}}])}();rwGrantSearch=angular.module("grantSearch.module",["grantSearch.controller","endpoints.service","helper.service","rwToggleFlip.directive","rwEnter.directive"]),function(){"use strict";angular.module("grantSearch.controller",[]).controller("grantSearchController",["$scope","$location","$sce","endpoints","helper","$window",function(n,t,i,r){n.selectedThemes=[];n.selectedThemeIds=[];n.selectedCareerStages=[];n.selectedCareerStageIds=[];n.sort="az";n.startIndex=0;n.numOfResults=8;n.resultsShown=n.numOfResults;n.queryString=t.search();n.clearFilters=function(t){n.selectedThemes=[];n.selectedThemeIds=[];n.selectedCareerStages=[];n.selectedCareerStageIds=[];n.searchTerm="";n.country="";n.countryId="";n.openClosedGrants="";n.sort="az";n.numOfResults=8;t&&n.getGrantResults()};n.queryString.searchterm&&(n.searchTerm=n.queryString.searchterm.toLowerCase());n.queryString.themes&&(n.selectedThemes=n.queryString.themes.toLowerCase().split("|"));n.queryString.themeids&&(n.selectedThemeIds=n.queryString.themeids.toLowerCase().split("|"));n.queryString.careerstage&&(n.selectedCareerStages=n.queryString.careerstage.toLowerCase().split("|"));n.queryString.careerstageid&&(n.selectedCareerStageIds=n.queryString.careerstageid.toLowerCase().split("|"));n.queryString.country&&(n.country=n.queryString.country.toLowerCase());n.queryString.countryid&&(n.countryId=parseInt(n.queryString.countryid));n.queryString.open&&(n.openClosedGrants="open");n.queryString.sort&&(n.sort=n.queryString.sort.toLowerCase());n.queryString.show&&(n.numOfResults=parseInt(n.queryString.show));n.populateFilters=function(){r.themesData.get().then(function(t){var r,i;if(n.themesFilterOptions=t,n.selectedThemes)for(r=0;r<n.selectedThemes.length;r++)for(i=0;i<n.themesFilterOptions.length;i++)n.selectedThemes[r]===n.themesFilterOptions[i].Name.toLowerCase()&&(n.selectedThemeIds.push(n.themesFilterOptions[i].Id),n.selectedThemes="")});r.careerStagesData.get().then(function(t){var r,i;if(n.careerStagesFilterOptions=t,n.selectedCareerStages)for(r=0;r<n.selectedCareerStages.length;r++)for(i=0;i<n.careerStagesFilterOptions.length;i++)n.selectedCareerStages[r]===n.careerStagesFilterOptions[i].Name.toLowerCase()&&(n.selectedCareerStageIds.push(n.careerStagesFilterOptions[i].Id),n.selectedCareerStages="")});r.countriesData.get().then(function(t){if(n.countriesOptions=t,n.country)for(var i=0;i<n.countriesOptions.length;i++)if(n.countriesOptions[i].Name.toLowerCase()===n.country){n.countryId=n.countriesOptions[i].Id;n.country="";break}})};n.toggleCheckbox=function(t,i){var r=i.indexOf(t);r>-1?i.splice(r,1):i.push(t);n.getGrantResults()};n.getGrantResults=function(t){var i={};n.sort&&(i.Sort=n.sort);n.selectedThemes.length>0&&(i.ThemeNames=n.selectedThemes);n.selectedThemeIds.length>0&&(i.ThemeIds=n.selectedThemeIds);n.selectedCareerStages.length>0&&(i.CareerStageNames=n.selectedCareerStages);n.selectedCareerStageIds.length>0&&(i.CareerStageIds=n.selectedCareerStageIds);n.searchTerm&&(i.Keywords=n.searchTerm);n.country&&(i.CountryName=n.country);n.countryId&&(i.CountryId=n.countryId);n.openClosedGrants&&(i.Open=n.openClosedGrants);!t&&n.resultsShown>n.numOfResults?(i.StartIndex=0,i.PageSize=n.resultsShown):(i.StartIndex=n.startIndex,i.PageSize=n.numOfResults);r.grantSearchResultsData.post(i).then(function(i){if(t)for(var r=0;r<i.Results.length;r++)n.grantSearchResults.push(i.Results[r]);else n.grantSearchResults=i.Results;n.resultsFound=i.Summary.ResultsFound;n.awardResultsFound=i.Summary.OtherResultsFound})};n.renderHtml=function(n){return i.trustAsHtml(n)};n.viewMore=function(){n.startIndex=n.resultsShown;n.resultsShown+=n.numOfResults;n.getGrantResults(!0)};n.setNumOfResults=function(t){n.numOfResults=t;n.resultsShown=n.numOfResults;n.startIndex=0;n.getGrantResults()}}])}();rwResearchProjectSearch=angular.module("researchProjectSearch.module",["researchProjectSearch.controller","endpoints.service"]),function(){"use strict";angular.module("researchProjectSearch.controller",[]).controller("researchProjectSearchController",["$scope","$location","$sce","endpoints",function(n,t,i,r){n.stage="current";n.startIndex=0;n.numOfResults=10;n.resultsShown=n.numOfResults;n.queryString=t.search();n.queryString.stage&&(n.stage=n.queryString.stage.toLowerCase());n.queryString.show&&(n.numOfResults=parseInt(n.queryString.show));n.setStage=function(t){n.stage=t;n.getResearchProjectResults()};n.getResearchProjectResults=function(t){var i={Stage:n.stage};!t&&n.resultsShown>n.numOfResults?(i.StartIndex=0,i.PageSize=n.resultsShown):(i.StartIndex=n.startIndex,i.PageSize=n.numOfResults);r.researchProjectSearchResultsData.post(i).then(function(i){if(t)for(var r=0;r<i.Results.length;r++)n.researchProjectSearchResults.push(i.Results[r]);else n.researchProjectSearchResults=i.Results;n.resultsFound=i.Summary.ResultsFound})};n.renderHtml=function(n){return i.trustAsHtml(n)};n.viewMore=function(){n.startIndex=n.resultsShown;n.resultsShown+=n.numOfResults;n.getResearchProjectResults(!0)};n.setNumOfResults=function(t){n.numOfResults=t;n.resultsShown=n.numOfResults;n.startIndex=0;n.getResearchProjectResults()}}])}();rwReportsPublicationsSearch=angular.module("reportsPublicationsSearch.module",["reportsPublicationsSearch.controller","endpoints.service","helper.service","rwEnter.directive"]),function(){"use strict";angular.module("reportsPublicationsSearch.controller",[]).controller("reportsPublicationsSearchController",["$scope","$location","$sce","endpoints","helper",function(n,t,i,r,u){n.sort="date";n.startIndex=0;n.numOfResults=10;n.resultsShown=n.numOfResults;n.showFilters=!1;n.queryString=t.search();n.checkQueryString=function(){if(n.queryString)for(var t in n.queryString)if(n.queryString.hasOwnProperty(t))return!0;return!1};n.checkQueryStringFiltersSet=function(){if(n.checkQueryString())for(var t in n.queryString)if(t!=="show"&&t!=="sort"&&t!=="searchterm")return!0;return!1};n.clearFilters=function(t){n.searchTerm="";n.year="";n.typeName="";n.typeId="";n.topicName="";n.topicId="";t&&n.getReportsPublicationsResults()};n.checkQueryStringFiltersSet()&&(n.showFilters=!0);n.queryString.searchterm&&(n.searchTerm=n.queryString.searchterm.toLowerCase());n.queryString.year&&(n.year=parseInt(n.queryString.year));n.queryString.type&&(n.typeName=n.queryString.type.toLowerCase());n.queryString.typeid&&(n.typeId=n.queryString.typeid.toLowerCase());n.queryString.topic&&(n.topicName=n.queryString.topic.toLowerCase());n.queryString.topicid&&(n.topicId=n.queryString.topicid.toLowerCase());n.queryString.sort&&(n.sort=n.queryString.sort.toLowerCase());n.queryString.show&&(n.numOfResults=parseInt(n.queryString.show));n.populateFilters=function(){var i,t;for(n.yearFilterOptions=[],i=new Date,t=i.getFullYear();t>=1985;t--)n.yearFilterOptions.push(t);r.reportPublicationTypesData.get().then(function(t){if(n.typeFilterOptions=t,n.typeName)for(var i=0;i<n.typeFilterOptions.length;i++)if(n.typeFilterOptions[i].Name.toLowerCase()===n.typeName){n.typeId=n.typeFilterOptions[i].Id;n.typeName="";break}});r.topicsData.get().then(function(t){if(n.topicFilterOptions=t,n.topicName)for(var i=0;i<n.topicFilterOptions.length;i++)if(n.topicFilterOptions[i].Name.toLowerCase()===n.topicName){n.topicId=n.topicFilterOptions[i].Id;n.topicName="";break}})};n.getReportsPublicationsResults=function(t){var i={Sort:n.sort};n.searchTerm&&(i.SearchTerm=n.searchTerm);n.year&&(i.Year=n.year);n.typeName&&(i.TypeName=n.typeName);n.typeId&&(i.TypeId=n.typeId);n.topicName&&(i.TopicName=n.topicName);n.topicId&&(i.TopicId=n.topicId);!t&&n.resultsShown>n.numOfResults?(i.StartIndex=0,i.PageSize=n.resultsShown):(i.StartIndex=n.startIndex,i.PageSize=n.numOfResults);r.reportsPublicationsSearchResultsData.post(i).then(function(i){if(t)for(var r=0;r<i.Results.length;r++)n.reportsPublicationsSearchResults.push(i.Results[r]);else n.reportsPublicationsSearchResults=i.Results;n.resultsFound=i.Summary.ResultsFound})};n.renderDate=function(n){return u.convertToReadableDate(n)};n.renderHtml=function(n){return i.trustAsHtml(n)};n.viewMore=function(){n.startIndex=n.resultsShown;n.resultsShown+=n.numOfResults;n.getReportsPublicationsResults(!0)};n.setNumOfResults=function(t){n.numOfResults=t;n.resultsShown=n.numOfResults;n.startIndex=0;n.getReportsPublicationsResults()}}])}();rwSiteSearch=angular.module("siteSearch.module",["siteSearch.controller","endpoints.service","helper.service","rwEnter.directive"]),function(){"use strict";angular.module("siteSearch.controller",[]).controller("siteSearchController",["$scope","$location","$sce","endpoints","helper","$window",function(n,t,i,r,u){n.searchArea="main website";n.contentType="all";n.selectedScientificAreas=[];n.selectedScientificAreaIds=[];n.pictureKey="001960491642182434533:_46i2wt1yxw";n.blogKey="001960491642182434533:qivllnjcpaw";n.sort="relevance";n.startIndex=0;n.numOfResults=10;n.resultsShown=n.numOfResults;n.queryString=t.search();n.checkQueryString=function(){if(n.queryString)for(var t in n.queryString)if(n.queryString.hasOwnProperty(t))return!0;return!1};n.checkQueryStringFiltersSet=function(){if(n.checkQueryString())for(var t in n.queryString)if(t!=="searchterm"&&t!=="searcharea"&&t!=="sort"&&t!=="show")return!0;return!1};n.clearFilters=function(t){n.contentType="all";n.selectedScientificAreas=[];n.selectedScientificAreaIds=[];n.topicName="";n.topicId="";n.pictureKey="001960491642182434533:_46i2wt1yxw";n.blogKey="001960491642182434533:qivllnjcpaw";n.sort="relevance";n.numOfResults=10;t&&n.getSiteResults()};n.checkQueryStringFiltersSet()&&(n.showFilters=!0);n.searchAreaOptions=["main website","image library","blogs","journals"];n.noTerm=!1;n.hideFilters=!1;n.queryString.searchterm&&(n.searchTerm=n.queryString.searchterm.toLowerCase());n.queryString.contenttype&&(n.contentType=n.queryString.contenttype.toLowerCase());n.queryString.searcharea&&(n.searchArea=n.queryString.searcharea.toLowerCase());n.queryString.sort&&(n.sort=n.queryString.sort.toLowerCase());n.queryString.show&&(n.numOfResults=parseInt(n.queryString.show));n.changeSearchArea=function(t){n.searchArea!=t&&(n.searchArea=t,$(".reveal.active").click(),n.getSiteResults())};n.changeSearchAreaDropdown=function(t){n.searchArea=t;$(".reveal.active").click();n.getSiteResults()};n.populateFilters=function(){n.contentTypeFilterOptions=["all","fellows","research fellows","events","grants","awards","policy reports","news","journal news"];r.topicsData.get().then(function(t){n.topicFilterOptions=t});r.scientificAreasData.get().then(function(t){n.scientificAreaFilterOptions=t});n.pictureFilterOptions=[{Label:"allPictures",Name:"All",Key:"001960491642182434533:_46i2wt1yxw"},{Label:"commercialPictures",Name:"Pictures for commercial licensing",Key:"001960491642182434533:col3z0sniis"},{Label:"framedPrints",Name:"Framed prints for display",Key:"001960491642182434533:q0-xlcguxtu"}];n.blogFilterOptions=[{Label:"allBlogs",Name:"All",Key:"001960491642182434533:qivllnjcpaw"},{Label:"inVerbaBlog",Name:"In Verba",Key:"001960491642182434533:6psxys4t0z4"},{Label:"repositoryBlog",Name:"The Repository",Key:"001960491642182434533:ch8s6obqb-o"},{Label:"insideScienceBlog",Name:"Inside Science",Key:"001960491642182434533:cfzubirhvzs"},{Label:"publishingBlog",Name:"Royal Society Publishing Blog",Key:"001960491642182434533:d_pwfmqwyam"}]};n.toggleCheckbox=function(t,i){var r=i.indexOf(t);r>-1?i.splice(r,1):i.push(t);n.getSiteResults()};n.clearSearchResults=function(){n.siteSearchResults=[];n.googleSearchResults=[];n.resultsFound=0};n.getSiteResults=function(t){switch(n.searchArea){case"image library":n.hideFilters=!1;n.siteSearchResults=[];n.searchTerm?(n.noTerm=!1,t||(n.startIndex=0,n.resultsShown=10),r.googleSiteSearchData.get(n.pictureKey,n.searchTerm,n.startIndex).then(function(i){if(t)for(var r=0;r<i.items.length;r++)n.googleSearchResults.push(i.items[r]);else n.googleSearchResults=i.items;n.resultsFound=i.searchInformation.totalResults})):n.noTerm=!0;break;case"blogs":n.hideFilters=!1;n.siteSearchResults=[];n.searchTerm?(n.noTerm=!1,t||(n.startIndex=0,n.resultsShown=10),r.googleSiteSearchData.get(n.blogKey,n.searchTerm,n.startIndex).then(function(i){if(t)for(var r=0;r<i.items.length;r++)n.googleSearchResults.push(i.items[r]);else n.googleSearchResults=i.items;n.resultsFound=i.searchInformation.totalResults})):n.noTerm=!0;break;case"journals":n.hideFilters=!0;n.searchTerm?(n.noTerm=!1,window.open(encodeURI(searchPageUrls.journals+n.searchTerm))):(n.noTerm=!0,n.clearSearchResults());break;default:n.noTerm=!1;n.googleSearchResults=[];var i={};n.searchArea&&(i.SearchArea=n.searchArea);n.sort&&(i.Sort=n.sort);n.searchTerm&&(i.SearchTerm=n.searchTerm);n.contentType&&(i.ContentType=n.contentType);n.selectedScientificAreas.length>0&&(i.ScientificAreaNames=n.selectedScientificAreas);n.selectedScientificAreaIds.length>0&&(i.ScientificAreaIds=n.selectedScientificAreaIds);n.topicName&&(i.TopicName=n.topicName);n.topicId&&(i.TopicId=n.topicId);!t&&n.resultsShown>n.numOfResults?(i.StartIndex=0,i.PageSize=n.resultsShown):(i.StartIndex=n.startIndex,i.PageSize=n.numOfResults);r.siteSearchResultsData.post(i).then(function(i){if(t)for(var r=0;r<i.Results.length;r++)n.siteSearchResults.push(i.Results[r]);else n.siteSearchResults=i.Results;n.resultsFound=i.Summary.ResultsFound})}};n.renderDate=function(n){return u.convertToReadableDate(n)};n.renderHtml=function(n){return i.trustAsHtml(n)};n.viewMore=function(){n.startIndex=n.resultsShown;n.resultsShown+=n.numOfResults;n.getSiteResults(!0)};n.setNumOfResults=function(t){n.numOfResults=t;n.resultsShown=n.numOfResults;n.startIndex=0;n.getSiteResults()}}])}(),function(){"use strict";angular.module("data.service",[]).service("data",["$rootScope","$http","$q",function(n,t,i){this.get=function(r){var u=i.defer(),f=t.get(r);return f.then(function(n){return u.resolve(n.data)},function(t){return n.$broadcast("serviceLayerErrorEvent",t),u.reject(t)},function(n){return u.update(n)}),u.promise};this.post=function(r,u){var f=i.defer(),e=t.post(r,u);return e.then(function(n){return f.resolve(n.data)},function(t){return n.$broadcast("serviceLayerErrorEvent",t),f.reject(t)},function(n){return f.update(n)}),f.promise}}])}(),function(){"use strict";angular.module("endpoints.service",["data.service"]).service("endpoints",["data",function(n){this.fellowFirstNameData={get:function(t){return n.get("/api/Fellows/Autocomplete?value="+t)}};this.fellowLastNameData={get:function(t,i){return n.get("/api/Fellows/Autocomplete?firstName="+i+"&value="+t)}};this.researchFellowFirstNameData={get:function(t){return n.get("/api/ResearchFellows/Autocomplete?value="+t)}};this.researchFellowLastNameData={get:function(t,i){return n.get("/api/ResearchFellows/Autocomplete?firstName="+i+"&value="+t)}};this.institutionsData={get:function(t){return n.get("/api/Institutions/Autocomplete?value="+t)}};this.researchFellowInstitutionsData={get:function(t){return n.get("/api/Institutions/ResearchFellows/Autocomplete?value="+t)}};this.specialismsData={get:function(t){return n.get("/api/Specialisms/Autocomplete?value="+t)}};this.scientificAreasData={get:function(){return n.get("/api/ScientificAreas")}};this.medalTypesData={get:function(){return n.get("/api/MedalAwardTypes")}};this.topicsData={get:function(){return n.get("/api/Topics")}};this.seriesData={get:function(){return n.get("/api/Series")}};this.locationsData={get:function(){return n.get("/api/Locations")}};this.reportPublicationTypesData={get:function(){return n.get("/api/PublicationTypes")}};this.themesData={get:function(){return n.get("/api/Themes")}};this.careerStagesData={get:function(){return n.get("/api/CareerStages")}};this.countriesData={get:function(){return n.get("/api/Countries")}};this.medalAwardsData={get:function(){return n.get("/api/FellowAwards")}};this.gendersData={get:function(){return n.get("/api/Genders")}};this.memberTypesData={get:function(){return n.get("/api/MembershipTypes")}};this.interestsData={get:function(){return n.get("/api/Interests")}};this.schemesData={get:function(){return n.get("/api/Schemes")}};this.fellowSearchResultsData={post:function(t){return n.post("/api/Fellows/Search",t)}};this.eventSearchResultsData={post:function(t){return n.post("/api/Events/Search",t)}};this.awardSearchResultsData={post:function(t){return n.post("/api/Awards/Search",t)}};this.grantSearchResultsData={post:function(t){return n.post("/api/Grants/Search",t)}};this.researchProjectSearchResultsData={post:function(t){return n.post("/api/ResearchProjects/Search",t)}};this.reportsPublicationsSearchResultsData={post:function(t){return n.post("/api/ReportsAndPublications/Search",t)}};this.siteSearchResultsData={post:function(t){return n.post("/api/SiteSearch/Search",t)}};this.googleSiteSearchData={get:function(t,i,r){return n.get("https://www.googleapis.com/customsearch/v1?key=AIzaSyCMGfdDaSfjqv5zYoS0mTJnOT3e9MURWkU&cx="+t+"&q="+i+"&start="+(r+1))}};this.loggedInState={get:function(){return n.get("/api/User")}}}])}(),function(){"use strict";angular.module("helper.service",[]).service("helper",[function(){var n=["January","February","March","April","May","June","July","August","September","October","November","December"];this.convertToReadableDate=function(t){var r=t.split("T"),i=r[0].split("-");return i[2]+" "+n[i[1]-1]+" "+i[0]};this.convertToSystemDate=function(n,t){var i=n.split("/");return t?i[2]+"-"+i[1]+"-"+i[0]+"T23:59:59":i[2]+"-"+i[1]+"-"+i[0]+"T00:00:00"}}])}(),function(){"use strict";angular.module("unique.filter",[]).filter("unique",[function(){return function(n,t){var i=[],r=[];return angular.forEach(n,function(n){var u=n[t];r.indexOf(u)===-1&&(r.push(u),i.push(n))}),i}}])}(),function(){"use strict";angular.module("rwToggleFlip.directive",[]).directive("rwToggleFlip",["$window",function(n){return{restrict:"A",link:function(t,i){n.bindFlip(i)}}}])}(),function(){"use strict";angular.module("rwDatepicker.directive",[]).directive("rwDatepicker",[function(){return{restrict:"A",link:function(n,t){t.datepicker({dateFormat:"dd/mm/yy",onSelect:function(t,i){i.id==="fromDate"?($("#toDate").datepicker("option","minDate",t),n.fromDate=$("#fromDate").val()):i.id==="toDate"&&($("#fromDate").datepicker("option","maxDate",t),n.toDate=$("#toDate").val());n.getEventResults()}});$("#toDate").datepicker("option","minDate",n.fromDate);$("#fromDate").datepicker("option","maxDate",n.toDate)}}}])}(),function(){"use strict";angular.module("rwEnter.directive",[]).directive("rwEnter",[function(){return{restrict:"A",link:function(n,t,i){t.on("keydown keypress",function(t){t.which===13&&(n.$apply(function(){n.$eval(i.rwEnter)}),t.preventDefault())})}}}])}(),function(){"use strict";angular.module("rwSetCardHeight.directive",[]).directive("rwSetCardHeight",["$window",function(n){return{restrict:"A",link:function(t,i,r){n.setCardHeight(i,r.rwSetCardHeight)}}}])}();jQuery(document).ready(function(){hideSections()})